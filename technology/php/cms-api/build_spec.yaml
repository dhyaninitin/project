version: 0.1
component: build
timeoutInSeconds: 10000
shell: bash
failImmediatelyOnError: true

steps:
  - type: Command
    name: "Zip codebase"
    timeoutInSeconds: 950
    failImmediatelyOnError: true
    command: |
      cd ${OCI_WORKSPACE_DIR}
      zip -rq portal-api.zip ./${OCI_PRIMARY_SOURCE_NAME}
    onFailure:
      - type: Command
        command: |
          echo "Handling Failure"
          echo "Failure successfully handled"
        timeoutInSeconds: 40
        runAs: root

outputArtifacts:
  - name: portal-api
    type: BINARY
    location: ../portal-api.zip
